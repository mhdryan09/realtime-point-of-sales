# 3. Sidebar Menu

## Recap Perubahan

### 1. Membuat Sidebar Menu Constants

**Langkah:**
Membuat file constants untuk menu sidebar di `src/constants/sidebar-constant.ts`:

```typescript
import {
  Album,
  Armchair,
  LayoutDashboard,
  SquareMenu,
  Users,
} from "lucide-react";

export const SIDEBAR_MENU_LIST = {
  admin: [
    {
      title: "Dashboard",
      url: "/admin",
      icon: LayoutDashboard,
    },
    {
      title: "Order",
      url: "/order",
      icon: Album,
    },
    {
      title: "Menu",
      url: "/menu",
      icon: SquareMenu,
    },
    {
      title: "Table",
      url: "/table",
      icon: Armchair,
    },
    {
      title: "User",
      url: "/admin/user",
      icon: Users,
    },
  ],
  cashier: [],
  kitchen: [],
};

export type SidebarMenuKey = keyof typeof SIDEBAR_MENU_LIST;
```

**Penjelasan:**

- **Role-based Menu**: Menu berbeda untuk setiap role (admin, cashier, kitchen)
- **Icon Integration**: Menggunakan Lucide React icons untuk setiap menu item
- **URL Structure**: URL yang konsisten untuk routing aplikasi
- **Type Safety**: TypeScript type untuk validasi role menu

### 2. Update App Sidebar Component

**Langkah:**
Menambahkan dynamic menu dan active state ke `src/components/common/app-sidebar.tsx`:

```typescript
import {
  SIDEBAR_MENU_LIST,
  SidebarMenuKey,
} from "@/constants/sidebar-constant";
import { usePathname } from "next/navigation";
import { cn } from "@/lib/utils";

export default function AppSidebar() {
  const { isMobile } = useSidebar();
  const pathname = usePathname();

  const profile = {
    name: "Ryan Pranata",
    role: "admin",
    avatar_url: "",
  };

  return (
    <Sidebar collapsible="icon">
      {/* Header */}
      <SidebarHeader>...</SidebarHeader>

      {/* Dynamic Menu Content */}
      <SidebarContent>
        <SidebarGroup>
          <SidebarGroupContent className="flex flex-col gap-2">
            <SidebarMenu>
              {SIDEBAR_MENU_LIST[profile.role as SidebarMenuKey]?.map(
                (item) => (
                  <SidebarMenuItem key={item.title}>
                    <SidebarMenuButton asChild tooltip={item.title}>
                      <a
                        href={item.url}
                        className={cn("h-auto px-4 py-3", {
                          "bg-teal-500 text-white hover:bg-teal-500 hover:text-white":
                            pathname === item.url,
                        })}
                      >
                        {item.icon && <item.icon />}
                        <span>{item.title}</span>
                      </a>
                    </SidebarMenuButton>
                  </SidebarMenuItem>
                ),
              )}
            </SidebarMenu>
          </SidebarGroupContent>
        </SidebarGroup>
      </SidebarContent>

      {/* Footer */}
      <SidebarFooter>...</SidebarFooter>
    </Sidebar>
  );
}
```

**Penjelasan:**

- **Dynamic Rendering**: Menu di-render berdasarkan role user
- **Active State**: Highlighting menu aktif berdasarkan current pathname
- **Collapsible Icon**: Sidebar bisa collapse dengan mode icon-only
- **Tooltip Support**: Tooltip muncul saat sidebar dalam mode collapsed
- **Conditional Styling**: Active menu menggunakan warna teal-500

#### **Penjelasan Script Kompleks:**

**1. Dynamic Menu Rendering:**

```typescript
{SIDEBAR_MENU_LIST[profile.role as SidebarMenuKey]?.map((item) => (...))}
```

- `SIDEBAR_MENU_LIST[profile.role as SidebarMenuKey]`: Mengakses array menu berdasarkan role user
- `profile.role as SidebarMenuKey`: TypeScript casting untuk memastikan role valid
- `?.map()`: Optional chaining, jika array tidak ada maka tidak error
- `map()`: Loop untuk render setiap item menu menjadi JSX

**2. Conditional Active State:**

```typescript
className={cn("h-auto px-4 py-3", {
  "bg-teal-500 text-white hover:bg-teal-500 hover:text-white":
    pathname === item.url,
})}
```

- `cn()`: Function dari `clsx` untuk menggabungkan class names
- `"h-auto px-4 py-3"`: Base classes yang selalu aktif
- Object kedua: Conditional classes berdasarkan kondisi
- `pathname === item.url`: Cek apakah URL saat ini sama dengan menu item
- Jika true: menambahkan class active (background teal, text white)

**3. Dynamic Icon Rendering:**

```typescript
{item.icon && <item.icon />}
```

- `item.icon`: Icon component dari constants (contoh: LayoutDashboard)
- `&&`: Logical operator, render icon hanya jika ada
- `<item.icon />`: Render icon component sebagai JSX element

**4. Optional Chaining & Type Casting:**

```typescript
SIDEBAR_MENU_LIST[profile.role as SidebarMenuKey]?.map(...)
```

- `as SidebarMenuKey`: Memberitahu TypeScript bahwa role pasti salah satu key yang valid
- `?.`: Jika SIDEBAR_MENU_LIST[role] undefined, tidak akan error
- Menghindari crash jika role tidak ditemukan dalam constants

### 3. Update Home Page

**Langkah:**
Memperbaiki halaman home di `src/app/page.tsx`:

```typescript
import { DarkModeToggle } from "@/components/common/darkmode-toggle";
import { Button } from "@/components/ui/button";
import Link from "next/link";

export default function Home() {
  return (
    <div className="bg-muted flex h-screen flex-col items-center justify-center space-y-4">
      <h1 className="text-4xl font-semibold">Welcome Ryan Pranata</h1>
      <Link href="/admin">
        <Button className="bg-teal-500 text-white">Access Dashboard</Button>
      </Link>
    </div>
  );
}
```

**Penjelasan:**

- **Welcome Screen**: Landing page dengan greeting personal
- **Dashboard Access**: Link langsung ke dashboard admin
- **Consistent Styling**: Menggunakan warna teal-500 yang sama dengan brand
- **Centered Layout**: Full screen layout dengan center alignment

---

**Kesimpulan:**
Perubahan ini menambahkan sistem menu sidebar yang dinamis berdasarkan role user, dengan active state highlighting dan dukungan collapsible sidebar. Menu terintegrasi dengan konstanta yang mudah di-maintain dan sistem routing yang konsisten.

### **Fitur Sidebar Menu yang Dibuat:**

- **Role-based Menu**: Menu berbeda untuk admin, cashier, dan kitchen
- **Dynamic Icons**: Icon Lucide React untuk setiap menu item
- **Active State**: Highlighting menu yang sedang aktif
- **Collapsible Sidebar**: Sidebar bisa collapse dengan tooltip support
- **Type Safety**: Full TypeScript support untuk menu structure

---

_Catatan: Sistem menu ini menggunakan constants yang terpisah untuk memudahkan maintenance dan konsistensi UI dengan active state yang responsif._
